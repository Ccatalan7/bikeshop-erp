# üì¶ Gu√≠a de Lectores de C√≥digo de Barras

## üéØ Resumen

Este ERP soporta **tres tipos de lectores de c√≥digo de barras** para adaptarse a diferentes entornos de trabajo:

1. **üñ•Ô∏è Lector USB/Teclado** - Para escritorio (Windows, macOS, Linux, Web)
2. **üì± Lector Bluetooth** - Para Windows, Android e iOS
3. **üì± Celular como Esc√°ner** - Usa tu tel√©fono como esc√°ner inal√°mbrico (NUEVO)

---

## üñ•Ô∏è Lector USB/Teclado (Recomendado para Desktop/POS)

### ¬øQu√© es?

Los lectores USB de c√≥digo de barras que emulan un teclado (HID - Human Interface Device). Cuando escaneas un c√≥digo, el lector "escribe" el c√≥digo como si lo hubieras tecleado.

### ‚úÖ Ventajas

- ‚úÖ **Funciona en todos los sistemas operativos** (Windows, macOS, Linux, Web)
- ‚úÖ **No requiere drivers** - Plug and play
- ‚úÖ **No requiere permisos especiales**
- ‚úÖ **M√°s econ√≥mico** que lectores Bluetooth
- ‚úÖ **Mayor velocidad** de escaneo
- ‚úÖ **Ideal para POS/escritorio**

### üõí Ejemplos de productos compatibles

Cualquier lector USB que diga "Keyboard Wedge" o "HID" funcionar√°:

- **Symbol/Zebra LS2208** (~$100-150 USD)
- **Honeywell Voyager 1200g** (~$120-180 USD)
- **Datalogic QuickScan QD2430** (~$100-140 USD)
- **Inateck BCST-70** (~$30-50 USD) - Econ√≥mico
- **Tera HW0002** (~$25-40 USD) - B√°sico

Buscar en Amazon/MercadoLibre: "USB barcode scanner keyboard emulation"

### üìã C√≥mo usar

1. **Conectar el lector USB** al computador
2. **Abrir el m√≥dulo**: `Configuraci√≥n ‚Üí Dispositivos ‚Üí Lector USB/Teclado`
3. **Presionar "Iniciar"** (se activa autom√°ticamente)
4. **Escanear cualquier c√≥digo de barras**
5. El c√≥digo aparecer√° autom√°ticamente en la lista

### üîß Configuraci√≥n del lector (opcional)

La mayor√≠a de lectores USB vienen con configuraci√≥n por defecto que funciona:
- **Sufijo**: Enter (env√≠a Enter despu√©s de cada c√≥digo)
- **Prefijo**: Ninguno
- **C√≥digo de caracteres**: ASCII est√°ndar

Si necesitas cambiar la configuraci√≥n:
1. Consulta el manual de tu lector
2. Usa los c√≥digos de barras de configuraci√≥n (generalmente incluidos)
3. Configura para que env√≠e "Enter" al final de cada c√≥digo

### üíª Uso en diferentes plataformas

| Plataforma | Estado | Notas |
|------------|--------|-------|
| **Windows** | ‚úÖ Recomendado | Perfecto para POS y escritorio |
| **macOS** | ‚úÖ Funciona | Plug and play |
| **Linux** | ‚úÖ Funciona | Puede requerir permisos USB |
| **Web** | ‚úÖ Funciona | Requiere foco en la ventana |

---

## üì± Celular como Esc√°ner (NUEVO - Opci√≥n 2)

### ¬øQu√© es?

Convierte tu celular Android o iOS en un esc√°ner de c√≥digo de barras inal√°mbrico que env√≠a los c√≥digos directamente a tu ERP en Windows a trav√©s de Internet.

### ‚úÖ Ventajas

- ‚úÖ **Sin hardware adicional** - Usa el celular que ya tienes
- ‚úÖ **Costo $0** - No necesitas comprar lectores
- ‚úÖ **Inal√°mbrico** - Funciona por WiFi o datos m√≥viles
- ‚úÖ **Multi-dispositivo** - Conecta varios celulares al mismo ERP
- ‚úÖ **F√°cil configuraci√≥n** - Emparejar con c√≥digo QR en segundos
- ‚úÖ **Funciona en cualquier lugar** - No requiere estar cerca del PC

### üìã C√≥mo usar

1. **Instalar app m√≥vil** "Vinabike Scanner" en tu celular (ver gu√≠a de instalaci√≥n)
2. **En Windows ERP**: Ir a `Configuraci√≥n ‚Üí Dispositivos ‚Üí Esc√°ner Remoto`
3. **Presionar "Iniciar"** para comenzar a escuchar
4. **Escanear c√≥digo QR** mostrado en pantalla con la app m√≥vil
5. **¬°Listo!** Ahora puedes escanear c√≥digos con la c√°mara de tu celular

### üíª Plataformas soportadas

| Plataforma | Receptor (ERP) | Esc√°ner (M√≥vil) |
|------------|----------------|-----------------|
| **Windows** | ‚úÖ Funciona | - |
| **Android** | - | ‚úÖ Funciona |
| **iOS** | - | ‚úÖ Funciona |
| **Web** | ‚ö†Ô∏è Proximamente | - |

### üîß Instalaci√≥n de la App M√≥vil

Ver gu√≠a completa en: **MOBILE_SCANNER_COMPLETE_GUIDE.md**

Resumen:
```bash
cd /Users/Claudio/Dev
flutter create vinabike_scanner
# Copiar archivos del template
# Configurar Supabase
flutter build apk --release
```

### üéØ Casos de uso ideales

- ‚úÖ **Inventario en bodega** - Caminar con el celular escaneando productos
- ‚úÖ **M√∫ltiples cajeros** - Cada cajero con su celular, un solo Windows POS
- ‚úÖ **Recepci√≥n de mercanc√≠a** - Escanear cajas al llegar
- ‚úÖ **Trabajo remoto** - Escanear desde cualquier ubicaci√≥n
- ‚úÖ **Presupuesto limitado** - Evitar compra de hardware

---

## üì± Lector Bluetooth (Windows/Android/iOS)

### ¬øQu√© es?

Lectores de c√≥digo de barras que se conectan v√≠a Bluetooth Low Energy (BLE) a dispositivos m√≥viles.

### ‚úÖ Ventajas

- ‚úÖ **Inal√°mbrico** - Mayor movilidad
- ‚úÖ **Ideal para inventario** en bodega
- ‚úÖ **Funciona en tablets** Android/iOS
- ‚úÖ **Port√°til** - Llevar en el bolsillo

### ‚ö†Ô∏è Limitaciones

- ‚ùå **No funciona en web ni macOS** (limitaciones de Flutter BLE)
- ‚ö†Ô∏è **Windows**: requiere adaptador Bluetooth Low Energy (BLE 4.0+) y Windows 10 build 15014 o superior
- ‚ö†Ô∏è **Android**: requiere permisos de Bluetooth y ubicaci√≥n
- ‚ö†Ô∏è **M√°s caro** que lectores USB
- ‚ö†Ô∏è **Requiere bater√≠a** y recarga

### üõí Ejemplos de productos compatibles

Lectores Bluetooth Low Energy (BLE):

- **Socket Mobile CHS 7Ci/7Di** (~$200-300 USD)
- **Inateck BCST-52** (~$60-80 USD)
- **TaoTronics TT-BS030** (~$50-70 USD)
- **Eyoyo EY-002** (~$40-60 USD)

‚ö†Ô∏è **IMPORTANTE**: Debe ser Bluetooth Low Energy (BLE/4.0+), no Bluetooth Classic

### üìã C√≥mo usar

1. **Abrir el m√≥dulo**: `Configuraci√≥n ‚Üí Dispositivos ‚Üí Lector Bluetooth`
2. **Encender el lector** Bluetooth
3. **Permitir permisos** cuando se soliciten
4. **Buscar dispositivos** disponibles
5. **Conectar** al lector deseado
6. **Escanear** - Los c√≥digos llegar√°n autom√°ticamente

#### Windows (pasos adicionales)

- Verifica que Bluetooth est√© activado en `Configuraci√≥n ‚Üí Dispositivos ‚Üí Bluetooth`
- Algunos lectores requieren emparejarse primero desde Windows; hazlo una vez antes de usar la app
- Si Windows solicita un PIN durante el emparejamiento, consulta el manual del lector (habitualmente `0000` o `1234`)

### üîê Permisos necesarios

**Android:**
- Bluetooth Scan
- Bluetooth Connect
- Ubicaci√≥n (requerido por Android para BLE)

**iOS:**
- Bluetooth (se solicita autom√°ticamente)

**Windows:**
- No requiere permisos dentro de la app, Windows maneja el emparejamiento
- Aseg√∫rate de que el adaptador BLE est√© activado y el lector est√© vinculado

### üíª Uso en diferentes plataformas

| Plataforma | Estado | Notas |
|------------|--------|-------|
| **Android** | ‚úÖ Funciona | Requiere permisos |
| **iOS** | ‚úÖ Funciona | Requiere permiso |
| **Windows** | ‚úÖ Funciona | BLE 4.0+, Windows 10 build 15014+ |
| **macOS** | ‚ùå No soportado | Usar lector USB |
| **Web** | ‚ùå No soportado | Usar lector USB |

---

## üè¢ Recomendaciones por Escenario

### üõí POS / Punto de Venta (Desktop)

**Recomendaci√≥n: Lector USB/Teclado**

‚úÖ Conexi√≥n estable sin interferencias  
‚úÖ No requiere bater√≠as  
‚úÖ M√°s r√°pido para alto volumen  
‚úÖ Funciona en Windows/Web  

**Producto sugerido**: Honeywell Voyager 1200g o Inateck BCST-70 (econ√≥mico)

> ¬øTablet o 2-en-1 con Windows? Puedes usar tambi√©n el lector Bluetooth para inventario r√°pido, siempre que el equipo tenga BLE 4.0+.

---

### üì¶ Inventario en Bodega (M√≥vil)

**Recomendaci√≥n: Lector Bluetooth + Tablet/Celular**

‚úÖ Movilidad total  
‚úÖ Escanear mientras caminas  
‚úÖ Tablet con pantalla grande para ver stock  

**Producto sugerido**: Socket Mobile CHS 7Ci o Inateck BCST-52

---

### üö¥ Taller de Bicicletas (H√≠brido)

**Recomendaci√≥n: Ambos**

**En escritorio (Windows)**: Lector USB para registro de pegas  
**En bodega (m√≥vil)**: Lector Bluetooth para buscar repuestos  
**En tablets Windows con BLE**: Puedes reutilizar el lector Bluetooth siguiendo la gu√≠a previa  

---

### üåê Uso en Web/Navegador

**Recomendaci√≥n: Lector USB/Teclado (√∫nica opci√≥n)**

Los navegadores web no soportan Bluetooth Low Energy para escaneo de c√≥digos.

---

## üîß Soluci√≥n de Problemas

### Lector USB no funciona

1. **Verificar conexi√≥n**: Desconectar y reconectar USB
2. **Probar en otro puerto**: Algunos puertos USB pueden tener problemas
3. **Verificar en editor de texto**: Abrir Notepad/TextEdit y escanear - deber√≠a escribir el c√≥digo
4. **Configurar sufijo**: El lector debe enviar "Enter" al final (consultar manual)
5. **Reiniciar aplicaci√≥n**: Cerrar y volver a abrir la p√°gina/app

### Lector Bluetooth no conecta

1. **Verificar permisos**: Ir a Configuraci√≥n de Android/iOS ‚Üí Permisos de la app
2. **Bluetooth activado**: Verificar que Bluetooth est√© encendido
3. **Modo de emparejamiento**: Algunos lectores requieren bot√≥n especial para emparejar
4. **Distancia**: Mantener el lector cerca del dispositivo (< 5 metros)
5. **Bater√≠a**: Verificar que el lector tenga bater√≠a
6. **Reiniciar lector**: Apagar y encender el lector Bluetooth

### C√≥digos se escanean duplicados

**Lector USB:**
- El lector puede estar enviando el c√≥digo dos veces
- Configurar "tiempo de espera entre escaneos" en el lector (consultar manual)

**Lector Bluetooth:**
- Normal en algunos lectores - el sistema filtra duplicados autom√°ticamente

### C√≥digos con caracteres extra√±os

- **Problema**: Layout del teclado diferente (espa√±ol vs ingl√©s)
- **Soluci√≥n**: Configurar el lector para usar ASCII est√°ndar sin caracteres especiales
- **Alternativa**: Configurar layout del teclado del sistema

---

## üéì Mejores Pr√°cticas

### ‚úÖ Para POS/Escritorio

1. Usar **lector USB con soporte**
2. Colocar el lector a la **derecha del teclado**
3. Configurar **sufijo Enter** para escaneo r√°pido
4. Tener **lector de repuesto** para emergencias

### ‚úÖ Para Inventario M√≥vil

1. **Cargar el lector** antes de iniciar turno
2. Mantener **tablet/celular con datos m√≥viles** para sincronizar
3. Usar **funda con clip** para llevar el lector
4. **Sincronizar inventario** al final del d√≠a

### ‚úÖ Para Taller

1. **Proteger el lector** del polvo y grasa (funda pl√°stica)
2. Limpiar regularmente con **pa√±o seco**
3. Evitar ca√≠das - los lectores son fr√°giles
4. Etiquetar repuestos con **c√≥digos legibles**

---

## üìä Comparaci√≥n R√°pida

| Caracter√≠stica | USB/Teclado | Bluetooth | Celular (Remoto) |
|----------------|-------------|-----------|------------------|
| **Plataformas** | Windows, Mac, Linux, Web | Windows, Android, iOS | Windows (ERP) + Android/iOS (App) |
| **Instalaci√≥n** | Plug and play | Requiere emparejamiento | App m√≥vil + QR pairing |
| **Permisos** | No requiere | Requiere permisos | C√°mara en celular |
| **Precio** | $25-150 USD | $40-300 USD | **$0** (usa tu celular) |
| **Movilidad** | Cable (1-2 metros) | Inal√°mbrico (10 metros) | **Ilimitada** (WiFi/datos) |
| **Bater√≠a** | No requiere | Requiere recarga | Usa bater√≠a del celular |
| **Velocidad** | Muy r√°pida | R√°pida | R√°pida |
| **Multi-dispositivo** | No | No | **S√≠** (m√∫ltiples celulares) |
| **Ideal para** | POS, Escritorio | Inventario, Bodega | Inventario, Multi-cajero, Presupuesto bajo |

---

## üõ†Ô∏è Configuraci√≥n T√©cnica

### Para desarrolladores

El sistema detecta autom√°ticamente la plataforma:

```dart
// HID (USB/Teclado) ‚Üí Web y escritorios sin BLE
if (kIsWeb || Platform.isMacOS || Platform.isLinux) {
  // Usa BarcodeScannerService (keyboard listener)
}

// Bluetooth Low Energy ‚Üí Windows, Android, iOS
if (Platform.isWindows || Platform.isAndroid || Platform.isIOS) {
  // Usa BluetoothScannerService (flutter_blue_plus + flutter_blue_plus_windows)
}
```
> Dependencias m√≠nimas: `flutter_blue_plus` y `flutter_blue_plus_windows` (para registrar el plugin en Windows desktop).

**Stream unificado de c√≥digos:**

```dart
scannerService.barcodeStream.listen((barcode) {
  print('C√≥digo escaneado: $barcode');
  // Buscar producto, agregar a carrito, etc.
});
```

---

## üìû Soporte

Si tienes problemas con los lectores:

1. **Verificar compatibilidad**: Aseg√∫rate de que tu lector est√© en la lista de compatibles
2. **Leer manual**: Cada lector tiene configuraciones espec√≠ficas
3. **Contactar soporte**: Si el problema persiste

---

## ‚úÖ Conclusi√≥n

Para un ERP en una bikeshop con operaciones mixtas:

- **üñ•Ô∏è Windows POS**: Lector USB (Honeywell Voyager 1200g)
- **üì¶ Inventario m√≥vil**: Lector Bluetooth + Tablet Android (Socket Mobile CHS 7Ci)
- **üí∞ Presupuesto limitado**: Lector USB econ√≥mico (Inateck BCST-70)

**El sistema soporta ambos - elige seg√∫n tu caso de uso!** üéØ
